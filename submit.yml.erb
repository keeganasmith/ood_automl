---
batch_connect:
  template: "basic"
script:
  native:
    - "--ntasks=<%= num_cores.to_i %>"
    - "--ntasks-per-node=<%= num_cores.to_i %>"
    <%- if node_type.eql? "CPU" -%>
    - "--partition=cpu"
    - "--time=<%= cpu_num_hours.to_i %>:00:00"
    - "--mem=<%= cpu_total_mem.to_i %>G"
    <%- else -%>
    - "--gres=gpu:<%= node_type %>:<%= num_gpus.to_i %>"
    - "--partition=gpu"
    - "--time=<%= gpu_num_hours.to_i %>:00:00"
    - "--mem=<%= gpu_total_mem.to_i %>G"
    <%- end -%>
    <%- unless email.blank? -%>
    - "--mail-type=ALL"
    - "--mail-user=<%= email %>"
    <%- end -%>
